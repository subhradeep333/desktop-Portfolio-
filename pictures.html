<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />

<script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>

<style>
    /* Custom styles for the new grid gallery */
    .grid-item {
        position: relative;
        display: block;
        overflow: hidden;
        border-radius: 8px; /* Rounded corners */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        aspect-ratio: 1 / 1; /* Makes all grid items perfectly square */
    }

    .grid-item img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensures image covers the square area without distortion */
        transition: transform 0.4s ease;
    }

    /* Hover effect: Zoom the image slightly */
    .grid-item:hover img {
        transform: scale(1.1);
    }
    
    /* Overlay for the caption, hidden by default */
    .grid-item .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.4s ease;
    }
    
    /* Show the overlay on hover */
    .grid-item:hover .overlay {
        opacity: 1;
    }

    .grid-item .caption-text {
        color: white;
        font-weight: 600;
        font-size: 1rem;
        text-align: center;
        padding: 1rem;
        /* Animate the text moving up on hover */
        transform: translateY(20px);
        opacity: 0;
        transition: transform 0.4s ease, opacity 0.4s ease;
    }
    
    /* Animate caption text into view on hover */
    .grid-item:hover .caption-text {
        transform: translateY(0);
        opacity: 1;
    }
</style>

<div class="text-slate-700 dark:text-slate-300">
    <h2 class="text-2xl font-bold text-center text-slate-900 dark:text-white mb-6">My Gallery</h2>

    <div id="image-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        </div>
</div>

<script>
    // --- DYNAMIC GALLERY DATA ---
    // The data structure remains the same.
    const galleryItems = [
        { imgSrc: 'images/mic.jpeg', fullSrc: 'images/mic.jpeg', caption: 'Pordium' },
        { imgSrc: 'images/speach.jpeg', fullSrc: 'images/speach.jpeg', caption: 'Speach' },
        { imgSrc: 'images/personal.jpeg', fullSrc: 'images/personal.jpeg', caption: 'Black & White' },
        { imgSrc: 'images/gif.gif', fullSrc: 'images/gif.gif', caption: 'Gif' },
        { imgSrc: 'images/hackolution.JPG', fullSrc: 'images/hackolution.JPG', caption: 'Hackolution' },
        { imgSrc: 'images/campustank.jpg', fullSrc: 'images/campustank.jpg', caption: 'Campustank' }
    ];

    const gridContainer = document.getElementById('image-grid');

    // Populate the grid dynamically
    galleryItems.forEach(item => {
        // Create an anchor tag that will be the grid item and lightbox trigger
        const gridItem = document.createElement('a');
        gridItem.href = item.fullSrc;
        gridItem.className = 'glightbox grid-item';
        gridItem.setAttribute('data-title', item.caption);
        gridItem.setAttribute('data-gallery', 'portfolio-gallery');

        // Create the image element
        const img = document.createElement('img');
        img.src = item.imgSrc;
        img.alt = item.caption;
        img.loading = 'lazy'; // Native browser lazy loading

        // Create the hover overlay
        const overlay = document.createElement('div');
        overlay.className = 'overlay';

        // Create the caption text for the overlay
        const caption = document.createElement('span');
        caption.className = 'caption-text';
        caption.textContent = item.caption;
        
        // Assemble the elements
        overlay.appendChild(caption);
        gridItem.appendChild(img);
        gridItem.appendChild(overlay);
        
        // Add the completed item to the grid container
        gridContainer.appendChild(gridItem);
    });

    // --- INITIALIZE GLIGHTBOX ---
    // This part remains the same
    const lightbox = GLightbox({
        selector: '.glightbox',
        touchNavigation: true,
        loop: true,
    });

</script>